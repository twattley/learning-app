#!/bin/zsh

# Start Learning API Frontend
# Usage: ./start_frontend [--tmux]
#   --tmux: Run in a detached tmux session

set -e

SCRIPT_DIR="$(dirname "$0")"
PROJECT_DIR="$(cd "$SCRIPT_DIR/.." && pwd)"
SESSION_NAME="learning-frontend"

if [[ "$1" == "--tmux" ]]; then
  # Kill existing session if it exists
  tmux kill-session -t $SESSION_NAME 2>/dev/null || true
  
  # Create new detached session
  tmux new-session -d -s $SESSION_NAME -c "$PROJECT_DIR/web"
  tmux send-keys -t $SESSION_NAME "npm run dev" Enter
  
  echo "âœ… Started frontend in tmux session: $SESSION_NAME"
  echo "   Frontend: http://localhost:5176"
  echo ""
  echo "   Attach: tmux attach -t $SESSION_NAME"
else
  echo "ðŸš€ Starting Learning API Frontend..."
  echo "Frontend will be available at: http://localhost:5176"
  echo ""
  
  cd "$PROJECT_DIR/web"
  npm run dev
fi
